datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model SearchResult {
  createdAt     DateTime     @default(now())
  id            String       @id @default(cuid())
  resultText    String?
  searchQuery   SearchQuery? @relation(fields: [searchQueryId], references: [id])
  searchQueryId String?
  updatedAt     DateTime     @updatedAt
}

model SearchQuery {
  createdAt     DateTime       @default(now())
  id            String         @id @default(cuid())
  queryText     String?
  searchResults SearchResult[]
  updatedAt     DateTime       @updatedAt
  user          User?          @relation(fields: [userId], references: [id])
  userId        String?
}

model VoiceRecording {
  audioFile         Json?
  createdAt         DateTime @default(now())
  id                String   @id @default(cuid())
  transcriptionText String?
  updatedAt         DateTime @updatedAt
  user              User?    @relation(fields: [userId], references: [id])
  userId            String?
}

model User {
  createdAt       DateTime         @default(now())
  email           String?          @unique
  firstName       String?
  id              String           @id @default(cuid())
  lastName        String?
  password        String
  roles           Json
  searchQueries   SearchQuery[]
  updatedAt       DateTime         @updatedAt
  username        String           @unique
  voiceRecordings VoiceRecording[]
}
